<template name="editView">
  {{> edit}}
  <button class="SaveAll">Save</button>
  <button class="Cancel">Cancel</button>
</template>


<template name="editField">
  {{#if editFieldOn fieldDescriptor}}
    <div class="container">
      <div class="col-xs-2">
        <label>{{fieldLabel}}</label>
      </div>
      <div class="form-group col-xs-8">
          <input class="form-control" type="text" id="field_editor_{{fieldDescriptor}}" value="{{printField this.receta fieldDescriptor}}">
          <a class="btn btn-default pull-right cancel_field_button" href="#" role="button">
            <span class="glyphicon glyphicon-remove"></span>
          </a>
          <a class="btn btn-primary btn-default pull-right confirm_field_button" href="#" role="button">
            <span class="glyphicon glyphicon-ok"></span>
          </a>
    </div>
    </div>
  {{else}}
    <div class="container">
      <div class="col-xs-2">
        <label>{{fieldLabel}}</label>
      </div>
      <div class="col-xs-8">
        <span class="text selectable">
        {{printField this.receta fieldDescriptor}}
      </span>
      </div>
      <div class="col-xs-2">
          <a class="btn btn-default pull-right edit_field_button" href="#" role="button">
            <span class="glyphicon glyphicon-edit"></span>
          </a>
      </div>
    </div>
  {{/if}}

</template>

<template name="edit">
  {{#with currentRecipe}}
    <div class="container">
      <div class="jumbotron">
        <h2>
        {{> editField fieldLabel="" fieldDescriptor="nombre" receta=this}}
        </h2>
      </div>
    </div>

    {{> editField fieldLabel="Bibliographic Reference" fieldDescriptor="referencia" receta=this}}
    {{> editField fieldLabel="Date" fieldDescriptor="fecha" receta=this}}
    {{> editField fieldLabel="Region" fieldDescriptor="zona" receta=this}}
    {{> editField fieldLabel="Variant of" fieldDescriptor="variante" receta=this}}
    {{> editField fieldLabel="Copy of" fieldDescriptor="copia" receta=this}}
    {{> editField fieldLabel="Equivalent (in other languages)" fieldDescriptor="equivalentes" receta=this}}
    {{> editField fieldLabel="Recommended consumption, yield,..." fieldDescriptor="recomendacion" receta=this}}

    <div class="container">
      <div class="lead">
        Ingredients
      </div>
    </div>
    <div class="container">
      <table class="table table-hover">
        <tbody>

          {{#each IndexedList currentRecipe.ingredientes}}
            <tr>
              {{> UnIngrediente}}
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    <div class="container">
      <form class="navbar-form navbar-left new-ingredient" role="add">
        <div class="form-group">
          <input type="text" class="form-control" id="ing_nombre" placeholder="New ingredient name">
        </div>
        <button type="submit" class="btn btn-default btn-primary add_ingredient">Add</button>
      </form>
    </div>


    <div class="container">
      <div class="lead">
        Steps
      </div>
    </div>

  {{/with}}
</template>


<template name="UnIngrediente">
  {{#if editFieldOn index}}
  <div class="form-group">
      <input class="form-control" type="text" id="ing_editor_qty_{{index}}" value="{{value.cantidad}}" placeholder="Qty.">
      <input class="form-control" type="text" id="ing_editor_units_{{index}}" value="{{value.tipo}}" placeholder="Units">
      <input class="form-control" type="text" id="ing_editor_name_{{index}}" value="{{value.nombre}}" placeholder="Ingredient name">
      <input class="form-control" type="text" id="ing_editor_alt_{{index}}" value="{{value.alternativos}}" placeholder="Alternatives">
      <a class="btn btn-default pull-right cancel_field_button" href="#" role="button">
        <span class="glyphicon glyphicon-remove"></span>
      </a>
      <a class="btn btn-primary btn-default pull-right confirm_field_button" href="#" role="button">
        <span class="glyphicon glyphicon-ok"></span>
      </a>
  </div>
  {{else}}
  <span class="item">
    <span {{Format value.cantidad}}>{{Placeholder value.cantidad "Qty."}}</span>
    &nbsp;
    <span {{Format value.tipo}}>{{Placeholder value.tipo "units"}}</span>
    of
    <span {{Format value.nombre}}>{{value.nombre}}</span>
    (alternative:
    <span {{Format value.alternativos}}>{{Placeholder value.alternativos "none"}}</span>)
    <a class="btn btn-default edit_field_button" href="#" role="button">
      <span class="glyphicon glyphicon-edit"></span>
    </a>
  </span>
  {{/if}}

</template>





<template name="edit3">
  <h3>Procedimientos para {{currentRecipe.nombre}}</h3>
  {{> Paso}}
</template>

<template name="Paso">
  <table class="table table-condensed table-striped">
      <thead>
        <tr>
          <th class="col-xs-1">Orden</th>
          <th class="col-xs-2">Acción</th>
          <th class="col-xs-2">Descriptor</th>
          <th class="col-xs-3">Ingredientes</th>
          <th class="col-xs-2">Utensilios</th>
          <th class="col-xs-1">Tiempo</th>
          <th class="col-xs-1">Condición</th>
        </tr>
      </thead>
      <tbody>
        {{#each currentRecipe.proceso}}
          {{> UnPaso}}
        {{/each}}
        <tr>
          <td>
            <select class="form-control" id="paso_orden">
              {{#each num_steps}}
                <option value="{{this}}">{{this}}</option>
              {{/each}}
            </select>
          </td>
          <td><input class="form-control" type="text" id="paso_accion"></td>
          <td><input class="form-control" type="text" id="paso_como"></td>
          <td>
            <table class="table table-condensed table-striped">
              <tbody>
                <tr>
                  <th class="col-xs-4">Cantidad</th>
                  <th class="col-xs-8">Ingrediente</th>
                </tr>
                {{#each newstep_ingredientes}}
                  <tr>
                    <td>{{cantidad}}</td>
                    <td>{{nombre}}</td>
                  </tr>
                {{/each}}
                <tr>
                  <td>
                    <input class="form-control" type="text" id="paso_cant_ingrediente">
                  </td>
                  <td>
                    <input class="form-control" type="text" id="paso_nom_ingrediente">
                  </td>
                  <td>
                    <button class="add_step_ingredient">
                      +
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <input class="form-control" type="text" id="paso_utensilios">
          </td>
          <td><input class="form-control" type="text" id="paso_tiempo"></td>
          <td><input class="form-control" type="text" id="paso_condicion"></td>
          <td>
            <button class="add_step">
              +
            </button>
          </td>
        </tr>
      </tbody>
    </table>
</template>


<!--

<template name="edit2">
  <h3>Ingredientes de {{currentRecipe.nombre}}</h3>
  <table class="table table-condensed table-striped">
    <thead>
      <tr>
        <th class="col-xs-1">Cantidad</th>
        <th class="col-xs-2">Unidades</th>
        <th class="col-xs-6">Ingrediente</th>
        <th class="col-xs-3">Alternativos</th>
      </tr>
    </thead>
    <tbody>
      {{#each currentRecipe.ingredientes}}
      {{> UnIngrediente}}
      {{/each}}
      <tr>
        <td><input class="form-control" type="text" id="ing_cantidad"></td>
        <td><input class="form-control" type="text" id="ing_tipo"></td>
        <td><input class="form-control" type="text" id="ing_nombre"></td>
        <td><input class="form-control" type="text" id="ing_alternativos"></td>
        <td>
          <button class="add_ingredient">
            +
          </button>
        </td>
      </tr>
    </tbody>
  </table>

</template>

-->
